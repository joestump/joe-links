{{template "base" .}}

{{define "title"}}Dashboard — Joe Links{{end}}

{{define "content"}}
<div class="flex items-center justify-between mb-6">
    <h1 class="text-2xl font-bold">My Links</h1>
    <a href="/dashboard/links/new" class="btn btn-primary btn-sm">+ New link</a>
</div>

<!-- Governing: SPEC-0004 REQ "User Dashboard" — search input with HTMX debounce -->
<div class="flex flex-col sm:flex-row gap-3 mb-6">
    <input
        type="search"
        name="q"
        class="input input-bordered flex-1"
        placeholder="Search links by slug, URL, or description..."
        value="{{.Query}}"
        hx-get="/dashboard"
        hx-trigger="input changed delay:400ms, search"
        hx-target="#link-list"
        hx-include="this"
        hx-push-url="false"
    >
</div>

<!-- Governing: SPEC-0004 REQ "User Dashboard" — tag filter chips -->
{{if .Tags}}
<div class="flex flex-wrap gap-2 mb-6">
    <a href="/dashboard"
       class="badge badge-outline {{if not .Tag}}badge-primary{{end}} cursor-pointer"
       hx-get="/dashboard"
       hx-target="#link-list"
       hx-push-url="false">All</a>
    {{range .Tags}}
    <a href="/dashboard?tag={{.Slug}}"
       class="badge badge-outline {{if eq $.Tag .Slug}}badge-primary{{end}} cursor-pointer"
       hx-get="/dashboard?tag={{.Slug}}"
       hx-target="#link-list"
       hx-push-url="false">{{.Name}}</a>
    {{end}}
</div>
{{end}}

<div id="link-list">
{{template "link_list" .}}
</div>
{{end}}
