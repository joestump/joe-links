{{template "base" .}}

{{define "title"}}{{.ProfileUser.DisplayName}} â€” Joe Links{{end}}

{{define "content"}}
<!-- Governing: SPEC-0012 REQ "User Profile Page (GET /u/{display_name_slug})" -->
<div class="max-w-4xl mx-auto">

    <!-- User header -->
    <div class="flex items-center gap-4 mb-8">
        <div class="avatar placeholder">
            <div class="bg-neutral text-neutral-content rounded-full w-16">
                <span class="text-2xl uppercase">{{slice .ProfileUser.DisplayName 0 1}}</span>
            </div>
        </div>
        <div>
            <h1 class="text-3xl font-bold">{{.ProfileUser.DisplayName}}</h1>
            <p class="text-base-content/60 text-sm">{{.TotalLinks}} public link{{if ne .TotalLinks 1}}s{{end}}</p>
        </div>
    </div>

    <!-- Public links list -->
    {{if .Links}}
    <div class="space-y-4">
        {{range .Links}}
        <div class="card bg-base-200 shadow-sm">
            <div class="card-body p-4">
                <div class="flex items-start justify-between gap-4">
                    <div class="min-w-0 flex-1">
                        <a href="/{{.Slug}}" class="font-mono font-semibold link link-primary text-lg" target="_blank">{{.Slug}}</a>
                        {{if .Title}}
                        <h3 class="font-medium mt-1">{{.Title}}</h3>
                        {{end}}
                        {{if .Description}}
                        <p class="text-sm text-base-content/60 mt-1">{{.Excerpt 150}}</p>
                        {{end}}
                        {{if .Tags}}
                        <div class="flex flex-wrap gap-1 mt-2">
                            {{range .Tags}}
                            <span class="badge badge-sm badge-outline">{{.}}</span>
                            {{end}}
                        </div>
                        {{end}}
                    </div>
                </div>
            </div>
        </div>
        {{end}}
    </div>

    <!-- Pagination -->
    {{if gt .TotalPages 1}}
    <div class="flex justify-center mt-8">
        <div class="join">
            {{if gt .Page 1}}
            <a href="/u/{{.ProfileUser.DisplayNameSlug}}?page={{.PrevPage}}" class="join-item btn btn-sm">Previous</a>
            {{else}}
            <button class="join-item btn btn-sm btn-disabled">Previous</button>
            {{end}}
            <button class="join-item btn btn-sm btn-active">Page {{.Page}} of {{.TotalPages}}</button>
            {{if lt .Page .TotalPages}}
            <a href="/u/{{.ProfileUser.DisplayNameSlug}}?page={{.NextPage}}" class="join-item btn btn-sm">Next</a>
            {{else}}
            <button class="join-item btn btn-sm btn-disabled">Next</button>
            {{end}}
        </div>
    </div>
    {{end}}

    {{else}}
    <div class="hero py-16">
        <div class="hero-content text-center">
            <div>
                <p class="text-base-content/60 text-lg">No public links yet.</p>
            </div>
        </div>
    </div>
    {{end}}

</div>
{{end}}
