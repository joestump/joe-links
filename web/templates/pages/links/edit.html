{{template "base" .}}

{{define "title"}}Edit Link — Joe Links{{end}}

{{define "content"}}
<!-- Governing: SPEC-0004 REQ "Edit Link Form" -->
<div class="max-w-lg mx-auto">
    <div class="card bg-base-200 shadow">
        <div class="card-body">
            <h2 class="card-title">Edit <span class="font-mono">{{.Link.Slug}}</span></h2>

            {{if .Error}}
            <div class="alert alert-error mb-4">
                <span>{{.Error}}</span>
            </div>
            {{end}}

            <form hx-put="/dashboard/links/{{.Link.ID}}" hx-target="body">
                <!-- Governing: SPEC-0001 REQ "Short Link Management" — slug is immutable after creation. -->
                <div class="form-control mb-4">
                    <label class="label"><span class="label-text">Slug</span></label>
                    <label class="input input-bordered flex items-center gap-2 opacity-60">
                        <span class="text-base-content/50 font-mono">go/</span>
                        <input type="text" class="grow font-mono" disabled value="{{.Link.Slug}}">
                    </label>
                </div>

                <div class="form-control mb-4">
                    <label class="label"><span class="label-text">Destination URL <span class="text-error">*</span></span></label>
                    <input type="url" name="url" class="input input-bordered"
                        required value="{{if .Form.URL}}{{.Form.URL}}{{else}}{{.Link.URL}}{{end}}">
                </div>

                <div class="form-control mb-4">
                    <label class="label"><span class="label-text">Title</span></label>
                    <input type="text" name="title" class="input input-bordered"
                        value="{{if .Form.Title}}{{.Form.Title}}{{else}}{{.Link.Title}}{{end}}">
                </div>

                <div class="form-control mb-4">
                    <label class="label"><span class="label-text">Description</span></label>
                    <input type="text" name="description" class="input input-bordered"
                        value="{{if .Form.Description}}{{.Form.Description}}{{else}}{{.Link.Description}}{{end}}">
                </div>

                <div class="form-control mb-6">
                    <label class="label">
                        <span class="label-text">Tags</span>
                        <span class="label-text-alt text-base-content/50">comma-separated</span>
                    </label>
                    <input type="text" name="tags" class="input input-bordered"
                        placeholder="engineering, tools"
                        value="{{.Form.Tags}}">
                </div>

                <div class="card-actions justify-end">
                    <a href="/dashboard/links/{{.Link.ID}}" class="btn btn-ghost">Cancel</a>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </div>
            </form>
        </div>
    </div>
</div>
{{end}}
