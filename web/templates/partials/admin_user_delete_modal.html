{{/* Governing: SPEC-0011 REQ "Admin User Deletion with Link Handling" */}}
{{define "admin_user_delete_modal"}}
<dialog id="confirm-modal" class="modal modal-open">
    <div class="modal-box">
        <h3 class="font-bold text-lg">Delete user?</h3>
        <div class="py-4 space-y-2">
            <p><span class="font-medium">{{.DisplayName}}</span> ({{.Email}})</p>
            <p class="text-sm text-base-content/70">
                This user owns <span class="font-semibold">{{.LinkCount}}</span> link{{if ne .LinkCount 1}}s{{end}}.
            </p>
            {{if gt .LinkCount 0}}
            <div class="form-control mt-3">
                <label class="label cursor-pointer justify-start gap-3">
                    <input type="radio" name="link_action" value="reassign" class="radio radio-primary" checked />
                    <span class="label-text">Reassign links to me</span>
                </label>
                <label class="label cursor-pointer justify-start gap-3">
                    <input type="radio" name="link_action" value="delete" class="radio radio-error" />
                    <span class="label-text">Delete all links</span>
                </label>
            </div>
            {{end}}
            <p class="text-sm text-warning mt-2">This action cannot be undone.</p>
        </div>
        <div class="modal-action">
            <button class="btn btn-ghost"
                    onclick="document.getElementById('modal').innerHTML=''">
                Cancel
            </button>
            <button class="btn btn-error"
                    hx-delete="{{.DeleteURL}}"
                    hx-target="#user-{{.UserID}}"
                    hx-swap="outerHTML"
                    hx-include="[name='link_action']"
                    onclick="document.getElementById('modal').innerHTML=''">
                Delete User
            </button>
        </div>
    </div>
    <form method="dialog" class="modal-backdrop">
        <button onclick="document.getElementById('modal').innerHTML=''">close</button>
    </form>
</dialog>
{{end}}
